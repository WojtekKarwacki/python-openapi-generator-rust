paths:
  /experiment/{experimentId}/confusion-matrix:
    get:
      tags:
        - insight
      summary: Get Time Series Chart
      operationId: getConfusionMatrices
      parameters:
        - name: experimentId
          in: path
          required: true
          schema:
            type: string
            title: Experiment Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfusionMatrices'
          headers:
            Cache-Control:
              schema:
                type: string
                const:
                  - private
                  - immutable
  /experiment/{experimentId}/lift:
    get:
      tags:
        - insight
      summary: Get Lift
      operationId: getLift
      parameters:
        - name: experimentId
          in: path
          required: true
          schema:
            type: string
            title: Experiment Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LiftResponse'
          headers:
            Cache-Control:
              schema:
                type: string
                const:
                  - private
                  - immutable
  /experiment/{experimentId}/scatter-plot:
    get:
      tags:
        - insight
      summary: Get Scatterplot
      operationId: getScatterPlot
      parameters:
        - name: experimentId
          in: path
          required: true
          schema:
            type: string
            title: Experiment Id
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 100000
            title: Limit
      responses:
        '200':
          description: Successful Response
          content:
            text/csv:
              schema:
                type: string
                format: binary
          headers:
            Cache-Control:
              schema:
                type: string
                const:
                  - private
                  - immutable
  /experiment/{experimentId}/time-series-chart:
    get:
      tags:
        - insight
      summary: Get Time Series Chart
      operationId: getTimeSeriesChart
      parameters:
        - name: experimentId
          in: path
          required: true
          schema:
            type: string
            title: Experiment Id
        - name: aggregation
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/TimeSeriesChartAggregation'
        - name: resolution
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/TimeSeriesChartResolution'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimeSeriesChart'
          headers:
            Cache-Control:
              schema:
                type: string
                const:
                  - private
                  - immutable
components:
  schemas:
    ConfusionMatrices:
      properties:
        value:
          items:
            $ref: '#/components/schemas/ConfusionMatrix'
          type: array
          title: Value
      type: object
      required:
        - value
      title: ConfusionMatrices
    ConfusionMatrix:
      properties:
        threshold:
          type: number
          title: Threshold
        falseNeg:
          type: integer
          title: Falseneg
        falsePos:
          type: integer
          title: Falsepos
        trueNeg:
          type: integer
          title: Trueneg
        truePos:
          type: integer
          title: Truepos
      type: object
      required:
        - threshold
        - falseNeg
        - falsePos
        - trueNeg
        - truePos
      title: ConfusionMatrix
    LiftBucket:
      properties:
        population:
          type: integer
          title: Population
        positiveTargets:
          type: integer
          title: Positivetargets
      type: object
      required:
        - population
        - positiveTargets
      title: LiftBucket
    LiftResponse:
      properties:
        buckets:
          items:
            $ref: '#/components/schemas/LiftBucket'
          type: array
          title: Buckets
      type: object
      required:
        - buckets
      title: LiftResponse
    TimeSeriesChart:
      properties:
        samples:
          items:
            $ref: '#/components/schemas/TimeSeriesChartSample'
          type: array
          title: Samples
      type: object
      required:
        - samples
      title: TimeSeriesChart
    TimeSeriesChartAggregation:
      type: string
      enum:
        - avg
        - sum
      title: TimeSeriesChartAggregation
    TimeSeriesChartResolution:
      type: string
      enum:
        - millisecond
        - second
        - minute
        - hour
        - day
        - week
        - month
        - quarter
        - year
      title: TimeSeriesChartResolution
    TimeSeriesChartSample:
      properties:
        time:
          type: string
          title: Time
        predicted:
          type: number
          title: Predicted
        actual:
          type: number
          title: Actual
      type: object
      required:
        - time
        - predicted
        - actual
      title: TimeSeriesChartSample
