paths:
  /models:
    get:
      tags:
        - model
      operationId: getModels
      parameters:
        - required: true
          schema:
            $ref: 'experiment.yml#/components/schemas/ExperimentId'
          name: experimentId
          in: query
      responses:
        200:
          description: ok
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Model"
components:
  schemas:
    Model:
      oneOf:
        - $ref: '#/components/schemas/ModelClassification'
        - $ref: '#/components/schemas/ModelRegression'
      discriminator:
        propertyName: type
        mapping:
          classification: '#/components/schemas/ModelClassification'
          regression: '#/components/schemas/ModelRegression'
    ModelAbstraction:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/ModelId'
        name:
          type: string
      required:
        - id
        - name
    ModelClassification:
      allOf:
        - $ref: '#/components/schemas/ModelAbstraction'
        - type: object
          properties:
            metrics:
              $ref: '#/components/schemas/ModelClassificationMetrics'
          required:
            - metrics
      x-dotdata-discriminator: type
    ModelClassificationMetrics:
      type: object
      properties:
        auc:
          type: number
          format: double
        accuracy:
          type: number
          format: double
        recall:
          type: number
          format: double
        precision:
          type: number
          format: double
        f1:
          type: number
          format: double
        kappa:
          type: number
          format: double
        mcc:
          type: number
          format: double
      required:
        - auc
        - accuracy
        - recall
        - precision
        - f1
        - kappa
        - mcc
    ModelId:
      $ref: 'api.yml#/components/schemas/Id'
    ModelRegression:
      allOf:
        - $ref: '#/components/schemas/ModelAbstraction'
        - type: object
          properties:
            metrics:
              $ref: '#/components/schemas/ModelRegressionMetrics'
          required:
            - metrics
      x-dotdata-discriminator: type
    ModelRegressionMetrics:
      type: object
      properties:
        rmse:
          type: number
          format: double
        mae:
          type: number
          format: double
        r2:
          type: number
          format: double
        rmsle:
          type: number
          format: double
        mape:
          type: number
          format: double
      required:
        - rmse
        - mae
        - r2
        - rmsle
        - mape
