<!DOCTYPE html>
<html lang="en-US"><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Begin Jekyll SEO tag v2.8.0 -->
    <title>trust | Web integration specification and a set of code generators.</title>
    <meta name="generator" content="Jekyll v3.9.5">
    <meta property="og:title" content="trust">
    <meta property="og:locale" content="en_US">
    <meta name="description" content="Web integration specification and a set of code generators.">
    <meta property="og:description" content="Web integration specification and a set of code generators.">
    <link rel="canonical" href="https://wkarwacki.github.io/trust/">
    <meta property="og:url" content="https://wkarwacki.github.io/trust/">
    <meta property="og:site_name" content="trust">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary">
    <meta property="twitter:title" content="trust">
    <script type="application/ld+json">
        {"@context":"https://schema.org","@type":"WebSite","description":"Web integration specification and a set of code generators.","headline":"trust","name":"trust","url":"https://wkarwacki.github.io/trust/"}</script>
    <!-- End Jekyll SEO tag -->

    <style class="anchorjs"></style><link rel="stylesheet" href="/trust/assets/css/style.css?v=430dc41a3d667a3596a0cf57f8df789eccdf881b">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

    <!-- Setup Google Analytics -->



    <!-- You can set your favicon here -->
    <!-- link rel="shortcut icon" type="image/x-icon" href="/trust/favicon.ico" -->

    <!-- end custom head snippets -->
    <meta name="google-site-verification" content="O33mw5oU--ff1KQ5y4A9sBLHTzZCAM9r0663JsB-zQc" />
</head>
<body>
<div class="container-lg px-3 my-5 markdown-body">

    <h1><a href="https://wkarwacki.github.io/trust/">trust</a></h1>



    <p align="center">
        <b>Documentation, source code: <a href="https://github.com/wkarwacki/trust" target="_blank">https://github.com/wkarwacki/trust</a></b>
    </p>

    <hr>
    <h1 id="trust-spec">Trust Spec</h1>

    <p>Trust Spec is a web integration specification and a set of code generators aiming to be a substitute for OpenAPI. It provides a unified way to describe data transfer interfaces and generates modern, type-safe code.</p>

    <h2 id="table-of-contents">Table of Contents<a class="anchorjs-link " href="#table-of-contents" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
    <ul>
        <li><a href="#i-just-want-to-glue-my-services-together"><strong>tldr; I just want to glue my services together</strong></a></li>
        <li><a href="#specification">Specification</a>
            <ul>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#common-use-cases">Common Use Cases</a></li>
                <li><a href="#openapi-conversion">OpenAPI Conversion</a></li>
            </ul>
        </li>
        <li><a href="#code-generation">Code Generation</a>
            <ul>
                <li><a href="#usage">Usage</a>
                    <ul>
                        <li><a href="#with-docker">With Docker</a></li>
                        <li><a href="#from-source">From Source</a></li>
                    </ul>
                </li>
                <li><a href="#supported-generators">Supported Generators</a>
                    <ul>
                        <li><a href="#experimental-generators">Experimental Generators</a></li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>

    <h2 id="i-just-want-to-glue-my-services-together">I just want to glue my services together<a class="anchorjs-link " href="#i-just-want-to-glue-my-services-together" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
    <p>Install Trust:</p>
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pip <span class="nb">install </span>trustspeccli
</code></pre></div></div>
    <p>Then, run:</p>
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>trust

Usage: trust &lt;COMMAND&gt;

Commands:
from-open-api
to-open-api
generate
<span class="nb">help           </span>Print this message or the <span class="nb">help </span>of the given subcommand<span class="o">(</span>s<span class="o">)</span>

Options:
<span class="nt">-h</span>, <span class="nt">--help</span>  Print <span class="nb">help</span>
</code></pre></div></div>

    <ul>
        <li>If you already have an OpenAPI spec:
            <ol>
                <li>first convert it to Trust spec with <code class="language-plaintext highlighter-rouge">from-open-api</code> command</li>
                <li>and then generate the glue code with <code class="language-plaintext highlighter-rouge">generate</code> command.</li>
            </ol>

            <blockquote>
                <p>:exclamation: Note that you may easily automate the whole process combining the two steps above, however it is recommended to make a migration once and leverage Trust spec’s expressiveness in long-term.</p>
            </blockquote>
        </li>
        <li><strong>Without an OpenAPI spec:</strong>
            <ul>
                <li>Start directly with Trust spec.</li>
            </ul>
        </li>
        <li><strong>To continue using OpenAPI for code generation:</strong>
            <ul>
                <li>Use Trust spec as an intermediate format with the <code class="language-plaintext highlighter-rouge">to-open-api</code> command.</li>
            </ul>
        </li>
    </ul>

    <h2 id="specification">Specification<a class="anchorjs-link " href="#specification" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
    <p>Trust specification enhances current integration standards like <a href="https://github.com/OAI/OpenAPI-Specification">OpenAPI</a>. Key benefits include:</p>
    <ul>
        <li><strong>Clear Notation</strong> - Single way to model and interpret an API.</li>
        <li><strong>Generic Types</strong> - Customizable types with parameters for different contexts.</li>
        <li><strong>Minimalistic</strong> - Simple, efficient language without redundant features.</li>
        <li><strong>Web System Integration Focused</strong> - Ideal for type-safe system integration.</li>
        <li><strong>Highly Customizable</strong> - Extensive <a href="https://github.com/sunng87/handlebars-rust">handlebars</a> helpers for template modification.</li>
        <li><strong>Protocol-Agnostic</strong> - Designed for HTTP but applicable to any API type.</li>
    </ul>

    <p>It addresses inherent OpenAPI issues with:</p>
    <ul>
        <li><strong>Enclosed Algebraic Data Types</strong> - All subtypes of an ADT are grouped in a single <code class="language-plaintext highlighter-rouge">adt</code> node.</li>
    </ul>

    <h3 id="overview">Overview<a class="anchorjs-link " href="#overview" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
    <p>Examples and more usage details can be found in <a href="https://github.com/wkarwacki/trust/tree/master/src/lib/test">tests</a>.</p>

    <p><strong>Data Types:</strong></p>
    <ul>
        <li><strong>Simple Types:</strong>
            <ul>
                <li><code class="language-plaintext highlighter-rouge">type: bool</code> - equivalent to OpenAPI <code class="language-plaintext highlighter-rouge">type: boolean</code></li>
                <li><code class="language-plaintext highlighter-rouge">type: int</code> - equivalent to OpenAPI <code class="language-plaintext highlighter-rouge">type: integer</code> with <code class="language-plaintext highlighter-rouge">format: int64</code></li>
                <li><code class="language-plaintext highlighter-rouge">type: dec</code> - equivalent to OpenAPI <code class="language-plaintext highlighter-rouge">type: number</code></li>
                <li><code class="language-plaintext highlighter-rouge">type: str</code> - equivalent to OpenAPI <code class="language-plaintext highlighter-rouge">type: string</code></li>
                <li><code class="language-plaintext highlighter-rouge">type: enum</code> - equivalent to OpenAPI <code class="language-plaintext highlighter-rouge">type: string</code> with <code class="language-plaintext highlighter-rouge">enum</code></li>
            </ul>
        </li>
        <li><strong>Complex Types:</strong>
            <ul>
                <li><code class="language-plaintext highlighter-rouge">type: obj</code> - equivalent to OpenAPI <code class="language-plaintext highlighter-rouge">type: object</code></li>
                <li><code class="language-plaintext highlighter-rouge">type: seq</code> - equivalent to OpenAPI <code class="language-plaintext highlighter-rouge">type: array</code></li>
                <li><code class="language-plaintext highlighter-rouge">type: map</code> - equivalent to OpenAPI <code class="language-plaintext highlighter-rouge">type: object</code> with <code class="language-plaintext highlighter-rouge">additionalProperties</code></li>
            </ul>
        </li>
        <li><strong>Special Types:</strong>
            <ul>
                <li><code class="language-plaintext highlighter-rouge">type: alias</code> - equivalent to OpenAPI <code class="language-plaintext highlighter-rouge">$ref</code></li>
                <li><code class="language-plaintext highlighter-rouge">type: struct</code> - equivalent to OpenAPI empty schema (<code class="language-plaintext highlighter-rouge">{}</code>)</li>
                <li><code class="language-plaintext highlighter-rouge">type: const</code> - equivalent to OpenAPI <code class="language-plaintext highlighter-rouge">const</code></li>
            </ul>
        </li>
    </ul>

    <h3 id="common-use-cases">Common Use Cases<a class="anchorjs-link " href="#common-use-cases" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>

    <p><strong>Including Variables from Other Types:</strong></p>
    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">Parent</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">obj</span>
    <span class="na">vars</span><span class="pi">:</span>
      <span class="na">parentVar</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">dec</span>
  <span class="na">AnotherParent</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">obj</span>
    <span class="na">vars</span><span class="pi">:</span>
      <span class="na">anotherParentVar</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">bool</span>
  <span class="na">WithParentsVars</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">obj</span>
    <span class="na">mix</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">defs.Parent"</span>
      <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">defs.AnotherParent"</span>
    <span class="na">vars</span><span class="pi">:</span>
      <span class="na">ownVar</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
</code></pre></div></div>
    <p>Results in:</p>
    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"parentVar"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"anotherParentVar"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ownVar"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

    <p><strong>Algebraic Data Types (Union Types):</strong></p>
    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">AdtType</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">obj</span>
    <span class="na">vars</span><span class="pi">:</span>
      <span class="na">discriminatorVar</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">str</span>
      <span class="na">someOtherVar</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">dec</span>
    <span class="na">adt</span><span class="pi">:</span>
      <span class="na">var</span><span class="pi">:</span> <span class="s">discriminatorVar</span>
      <span class="na">map</span><span class="pi">:</span>
        <span class="na">firstSubtype</span><span class="pi">:</span>
          <span class="na">vars</span><span class="pi">:</span>
            <span class="na">firstSubtypeVar</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">int</span>
        <span class="na">secondSubtype</span><span class="pi">:</span>
          <span class="na">vars</span><span class="pi">:</span>
            <span class="na">secondSubtypeVar</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">bool</span>
</code></pre></div></div>
    <p>Interpreted as:</p>
    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"discriminatorVar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"firstSubtype"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"someOtherVar"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"firstSubtypeVar"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"discriminatorVar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"secondSubtype"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"someOtherVar"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"secondSubtypeVar"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

    <p><strong>Generic Types:</strong></p>
    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">defs</span><span class="pi">:</span>
    <span class="na">SomeNamedString</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">str</span>
    <span class="na">ParameterizedType</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">obj</span>
      <span class="na">vars</span><span class="pi">:</span>
        <span class="na">varOfParamAbcType</span><span class="pi">:</span>
          <span class="na">param</span><span class="pi">:</span> <span class="s">ParamAbc</span> <span class="c1"># to declare a generic type, you need to simply use a 'param' keyword</span>
        <span class="na">varOfParamXyzType</span><span class="pi">:</span>
          <span class="na">param</span><span class="pi">:</span> <span class="s">ParamXyz</span> <span class="c1"># similarly to the above, this time with a different name</span>
        <span class="na">anoterVarOfParamXyzType</span><span class="pi">:</span>
          <span class="na">param</span><span class="pi">:</span> <span class="s">ParamXyz</span> <span class="c1"># similarly to the above, this time with a different name</span>
    <span class="na">SubtypeOfParameterizedType</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">obj</span>
      <span class="na">ext</span><span class="pi">:</span> <span class="c1"># extending a generic type</span>
        <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">defs.ParameterizedType'</span>
        <span class="na">args</span><span class="pi">:</span> <span class="c1"># with below type-arguments</span>
          <span class="na">ParamAbc</span><span class="pi">:</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">bool</span>
          <span class="na">ParamXyz</span><span class="pi">:</span>
            <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">defs.SomeType'</span>
</code></pre></div></div>
    <p>Equivalent to:</p>
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">interface</span> <span class="nc">ParameterizedType</span><span class="o">&lt;</span><span class="nc">ParamAbc</span><span class="o">,</span> <span class="nc">ParamXyz</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nc">ParamAbc</span> <span class="n">varOfParamAbcType</span><span class="o">;</span>
    <span class="nc">ParamXyz</span> <span class="n">varOfParamXyzType</span><span class="o">;</span>
    <span class="nc">ParamXyz</span> <span class="n">anoterVarOfParamXyzType</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">interface</span> <span class="nc">SubtypeOfParameterizedType</span> <span class="kd">extends</span> <span class="nc">ParameterizedType</span><span class="o">&lt;</span><span class="nc">Boolean</span><span class="o">,</span> <span class="nc">SomeType</span><span class="o">&gt;</span> <span class="o">{</span> <span class="o">}</span>
</code></pre></div></div>

    <h3 id="openapi-conversion">OpenAPI Conversion<a class="anchorjs-link " href="#openapi-conversion" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>

    <ul>
        <li>Control the layout of the generated Trust spec with the <code class="language-plaintext highlighter-rouge">-l</code> option. For instance, setting it to <code class="language-plaintext highlighter-rouge">tag</code> organizes the Trust spec by OpenAPI tags, as shown in this <a href="https://github.com/wkarwacki/trust/blob/master/test/integration/specs/openapi_fastapi/api.yml#L9">example</a>.</li>
    </ul>

    <h2 id="code-generation">Code Generation<a class="anchorjs-link " href="#code-generation" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>

    <h3 id="usage">Usage<a class="anchorjs-link " href="#usage" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>

    <h4 id="with-docker">With Docker<a class="anchorjs-link " href="#with-docker" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h4>
    <p>Prerequisites:</p>
    <ul>
        <li><a href="https://docs.docker.com/engine/install/">Docker</a>
            <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./docker/build.sh
<span class="nv">$ </span>docker run trust
</code></pre></div>    </div>
        </li>
    </ul>

    <h4 id="from-source">From Source<a class="anchorjs-link " href="#from-source" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h4>
    <p>Prerequisites:</p>
    <ul>
        <li><a href="https://www.rust-lang.org/tools/install">Rust</a>
            <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>cargo run trust
</code></pre></div>    </div>
        </li>
    </ul>

    <h3 id="supported-generators">Supported Generators:<a class="anchorjs-link " href="#supported-generators" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
    <ul>
        <li>Python HTTP Server (<a href="https://github.com/tiangolo/fastapi">fastapi</a>)</li>
        <li>Python HTTP Client (<a href="https://github.com/encode/httpx">httpx</a>)</li>
    </ul>

    <h4 id="experimental-generators">Experimental Generators:<a class="anchorjs-link " href="#experimental-generators" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h4>
    <blockquote>
        <p>:exclamation: Not fully implemented. Use at your own risk.</p>
    </blockquote>

    <ul>
        <li>Kotlin HTTP Server (<a href="https://github.com/spring-projects/spring-framework">spring</a>)</li>
        <li>Scala HTTP Server (<a href="https://github.com/com-lihaoyi/cask">cask</a>)</li>
    </ul>



    <div class="footer border-top border-gray-light mt-5 pt-3 text-right text-gray">
        This site is open source. <a href="https://github.com/wkarwacki/trust/edit/master/README.md">Improve this page</a>.
    </div>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
<script>anchors.add();</script>


</body></html>